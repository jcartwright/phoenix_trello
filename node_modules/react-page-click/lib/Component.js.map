{"version":3,"sources":["../src/Component.js"],"names":[],"mappings":"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","file":"Component.js","sourcesContent":["import React from 'react';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\n\nconst MAX_MOVE = 20;\n\n\nconst extractCoordinates = ({changedTouches}) =>\n  ({x: changedTouches[0].screenX, y: changedTouches[0].screenY});\n\n\nexport const ReactPageClick = React.createClass({\n  propTypes: {\n    children: React.PropTypes.node.isRequired,\n    notify: React.PropTypes.func.isRequired,\n    onMouseDown: React.PropTypes.func,\n    onTouchStart: React.PropTypes.func,\n    outsideOnly: React.PropTypes.bool,\n    notifyOnTouchEnd: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {\n      outsideOnly: true,\n      notifyOnTouchEnd: false\n    };\n  },\n\n\n  componentWillMount() {\n    this.insideClick = false;\n    this.touchStart = null;\n  },\n\n\n  componentDidMount() {\n    global.window.addEventListener('mousedown', this.onDocumentMouseDown, false);\n    global.window.addEventListener('mouseup', this.onDocumentMouseUp, false);\n    global.window.addEventListener('touchstart', this.onDocumentTouchStart, false);\n    global.window.addEventListener('touchend', this.onDocumentTouchEnd, false);\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentWillUnmount() {\n    global.window.removeEventListener('mousedown', this.onDocumentMouseDown, false);\n    global.window.removeEventListener('mouseup', this.onDocumentMouseUp, false);\n    global.window.removeEventListener('touchstart', this.onDocumentTouchStart, false);\n    global.window.removeEventListener('touchend', this.onDocumentTouchEnd, false);\n  },\n\n\n  onDocumentMouseDown(...args) {\n    if (this.insideClick) {\n      return;\n    }\n    this.props.notify(...args);\n  },\n\n\n  onDocumentMouseUp() {\n    this.insideClick = false;\n  },\n\n\n  onDocumentTouchStart(event, ...args) {\n    if (this.insideClick) {\n      return;\n    }\n    if (this.props.notifyOnTouchEnd) {\n      this.touchStart = extractCoordinates(event);\n    } else {\n      this.props.notify(event, ...args);\n    }\n  },\n\n\n  onDocumentTouchEnd(event, ...args) {\n    // on mobile safari click events are not bubbled up to the document unless the target has the\n    // css `cursor: pointer;` http://www.quirksmode.org/blog/archives/2010/10/click_event_del_1.html\n    // so try and work out if we should call the notify prop\n    if (this.props.notifyOnTouchEnd && this.touchStart && !this.insideClick) {\n      const {x, y} = extractCoordinates(event);\n      const dx = Math.abs(x - this.touchStart.x);\n      const dy = Math.abs(y - this.touchStart.y);\n\n      if (dx < MAX_MOVE && dy < MAX_MOVE) {\n        this.props.notify(event, ...args);\n      }\n    }\n    this.touchStart = null;\n    this.insideClick = false;\n  },\n\n\n  onMouseDown(...args) {\n    this.insideClick = true;\n    if (this.props.onMouseDown) {\n      this.props.onMouseDown(...args);\n    }\n  },\n\n\n  onTouchStart(...args) {\n    this.insideClick = true;\n    if (this.props.onTouchStart) {\n      this.props.onTouchStart(...args);\n    }\n  },\n\n\n  render() {\n    const props = this.props.outsideOnly ? {\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart\n    } : {};\n\n    return React.cloneElement(React.Children.only(this.props.children), props);\n  }\n});\n"]}